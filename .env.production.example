# =============================================================================
# OnChain Intelligence - Production Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to git!
# =============================================================================

# =============================================================================
# API CONFIGURATION
# =============================================================================
ONCHAIN_API_HOST=0.0.0.0
ONCHAIN_API_PORT=8500
ONCHAIN_API_WORKERS=4

# =============================================================================
# DATA SOURCE CONFIGURATION  
# =============================================================================
# Options: mempool_space, blockchain_info, blockcypher
# mempool_space is recommended (FREE, fastest, best mempool data)
DATA_SOURCE=mempool_space

# Mempool.space API (Primary - FREE)
MEMPOOL_SPACE_URL=https://mempool.space/api

# Blockchain.info API (Fallback 1 - FREE, optional API key for higher limits)
BLOCKCHAIN_INFO_API_KEY=
BLOCKCHAIN_INFO_RATE_LIMIT=1.0

# BlockCypher API (Fallback 2 - FREE tier, optional token for higher limits)
BLOCKCYPHER_API_TOKEN=

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL connection - FILL IN YOUR VALUES
DB_HOST=localhost
DB_PORT=5432
DB_NAME=bitcoin_onchain_signals
DB_USER=
DB_PASSWORD=

# Alternative: Full connection URL (overrides above if set)
# ONCHAIN_DATABASE_URL=postgresql://user:password@host:port/database

# Connection pool
DB_POOL_MIN=2
DB_POOL_MAX=10

# =============================================================================
# DATA QUALITY THRESHOLDS
# =============================================================================
# Completeness: minimum required data completeness (0-1)
ONCHAIN_COMPLETENESS_THRESHOLD=0.80

# Max data age before considered stale (hours)
ONCHAIN_MAX_DATA_AGE_HOURS=2.0

# Max conflicting signals before reducing confidence
ONCHAIN_MAX_CONFLICTING_SIGNALS=2

# =============================================================================
# SIGNAL THRESHOLDS
# =============================================================================
ONCHAIN_MIN_CONFIDENCE=0.60
ONCHAIN_STABILITY_THRESHOLD=0.70

# =============================================================================
# USAGE POLICY WEIGHTS
# =============================================================================
# Weight when data is ACTIVE (normal)
ONCHAIN_NORMAL_WEIGHT=1.0

# Weight when data is DEGRADED
ONCHAIN_DEGRADED_WEIGHT=0.3

# =============================================================================
# SCHEDULER SETTINGS
# =============================================================================
# Collection interval in seconds (300 = 5 minutes)
ONCHAIN_SCHEDULER_INTERVAL=300

# Enabled modules
ONCHAIN_ENABLE_COLLECTION=true
ONCHAIN_ENABLE_WHALE_DETECTION=true
ONCHAIN_ENABLE_SIGNAL_ENGINE=true

# =============================================================================
# LOGGING
# =============================================================================
# Options: DEBUG, INFO, WARNING, ERROR
ONCHAIN_LOG_LEVEL=INFO

# =============================================================================
# TELEGRAM ALERTING
# =============================================================================
# Bot token from @BotFather
TELEGRAM_BOT_TOKEN=

# Channel/Group ID to send alerts to
# Can be numeric ID or @channel_username
TELEGRAM_CHANNEL_ID=

# Enable/disable Telegram alerts
TELEGRAM_ALERTS_ENABLED=true

# =============================================================================
# SECURITY (Optional - for API authentication)
# =============================================================================
# API key for authenticating requests (leave empty to disable)
# ONCHAIN_API_KEY=

# =============================================================================
# PM2 CONFIGURATION (used by ecosystem.config.js)
# =============================================================================
PM2_APP_NAME=onchain-intelligence
PM2_INSTANCES=1
PM2_MAX_MEMORY=512M
